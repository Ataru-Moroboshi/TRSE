Unit Functions;

var
  i : Integer;

/** 
  Gets a random integer number 0-65535
  **/
function GetRnd(i : global Integer):Integer;
var
    h,l : byte;
begin
  asm("
    ld bc,#0000
    ld de,[Functions_i]
    call #09b4    ; Loads ACC with BCDE
    call #0a9d    ; Set flag to Integer
    call #14c9    ; RND routine. Using ACC, not A
    call #0a7f    ; CINT. Puts ACC into HL  
    ld a,h
    ld [Functions_h],a
    ld a,l
    ld [Functions_l],a
  ");
    GetRnd := 256*h+l;
end;

end.